<?xml version="1.0" encoding="UTF-8" ?>
<project name="My subsite" default="help">

    <target name="start-container" description="Start docker container">
        <echo msg='Starting container "${jenkins.container.name}."' />
        <exec command="docker run --name ${jenkins.container.name} -p 127.0.0.1:80:80 -v ${jenkins.workspace.dir}:/web -w /web -d dev-server:latest" />
    </target>

    <target name="stop-container" description="Drop database, stop and remove container">
        <echo msg='Stopping container "${jenkins.container.name}".' />
        <exec command="echo y | mysqladmin -h${drupal.db.host} -u${drupal.db.user} -p${drupal.db.password} DROP DATABASE IF EXISTS ${drupal.db.name}" logoutput="true" />
        <exec command="docker stop ${jenkins.container.name}; docker rm $(docker ps -aq)" />
    </target>

</project>
